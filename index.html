<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/custom.css" rel="stylesheet">
  <title>Traffic of Seattle</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" /> -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
  <style>
    html,
    body,
    main {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      background: #fff;
      display: flex;
      flex-flow: column;
    }

    #map {
      flex-grow: 1;
    }


  </style>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
</head>
<!-- <head>
  <title>Lab 4 Leo Kwo</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <style>
    html,
    body,
    #map {
      width: 100%;
      height: 100%;
      padding: 0;
      margin: 0;
    }
  </style>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head> -->

<body>

  <nav class="navbar navbar-expand-md navbar-dark bg-dark" id="override_nav">
    <div class="navbar-brand">Project Title</div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>


    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="">Map<span class="sr-only">(current)</span></a>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About</a>
          <div class="dropdown-menu" aria-labelledby="dropdown01">
            <a class="dropdown-item" href="#">Project Information</a>
            <a class="dropdown-item" href="#">Data Sources</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <div id="map"></div>
  <script type="text/javascript">
    var map = L.map('map', {
      maxZoom: 14,
      minZoom: 12
    }).setView([47.620856, -122.319963], 12);

    var grayscale = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}@2x.png').addTo(map);
    var streets = L.tileLayer('http://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}@2x.png');
    var satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}@2x');

    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	     attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	     subdomains: 'abcd',
	     maxZoom: 19
    }).addTo(map);

    var grayscale = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}@2x.png').addTo(map);
    var streets = L.tileLayer('http://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}@2x.png');
    var satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}@2x');


    var traffic = L.tileLayer('assets/tiles/traffic/{z}/{x}/{y}.png', {
      attribution: 'Generated by Leo Kwo | Traffic Flow 2018',
      detectRetina: true
    });

    var beacons = L.tileLayer('assets/tiles/beacon/{z}/{x}/{y}.png', {
      attribution: 'Generated by Leo Kwo | Traffic Beacons Per Tract',
      detectRetina: true
    });

    var collision = L.tileLayer('assets/tiles/collision/{z}/{x}/{y}.png', {
      attribution: 'Generated by Leo Kwo | Collisions Per Tract',
      detectRetina: true
    });

    var cushion = L.tileLayer('assets/tiles/cushion/{z}/{x}/{y}.png', {
      attribution: 'Generated by Leo Kwo | Crash Cushions',
      detectRetina: true
    });

    var baseLayers = {
      'Grayscale': grayscale,
      'Streets': streets,
      'Satellite': satellite
    };

    var overlays = {
      "Collisions Per Tract": collision,
      "Traffic Beacons Per Tract": beacons,
      "Traffic Flow 2018": traffic,
      "Crash Cushions": cushion
    }

    L.control.layers(baseLayers, overlays, {
      collapsed: false,
      position: 'topright'
    }).addTo(map);

    function styleDiv(div) {
      div.style.background = "#ffffff";
      div.style.padding = "30px";
      div.style["border-radius"] = "20px";
      return div;
    }

    var cushionLegend = L.control({position: 'bottomright'});
    cushionLegend.onAdd = function () {
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += '<b>Crash Cushions</b><br />';
        div.innerHTML += '<p><i class="fas fa-circle" style="color: #33a02c"></i> Crash Cushions</p>';
        div = styleDiv(div);
        return div;
    };

    // #f7fbff
    // #dceaf7
    // #bed8ed
    // #8fc2de
    // #5ba3d0
    // #3182be
    // #105ca5
    // #08306b
    var beaconLegend = L.control({position: 'bottomright'});
    beaconLegend.onAdd = function () {
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += '<b>Traffic Beacon Per Tract</b><br />';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #f7fbff; box-shadow: 0px 0px 3px #888888;"></i> 0 - 1 Beacons</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #dceaf7; box-shadow: 0px 0px 3px #888888;"></i> 1 - 3 Beacons</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #bed8ed; box-shadow: 0px 0px 3px #888888;"></i> 3 - 4 Beacons</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #8fc2de; box-shadow: 0px 0px 3px #888888;"></i> 4 - 6 Beacons</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #5ba3d0; box-shadow: 0px 0px 3px #888888;"></i> 6 - 9 Beacons</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #3182be; box-shadow: 0px 0px 3px #888888;"></i> 9 - 12 Beacons</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #105ca5; box-shadow: 0px 0px 3px #888888;"></i> 12 - 15 Beacons</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #08306b; box-shadow: 0px 0px 3px #888888;"></i> 15 - 21 Beacons</p>';
        div = styleDiv(div);
        return div;
    };

    // #fef0d9
    // #fdcc8a
    // #fc8d59
    // #e34a33
    // #b30000
    var flowLegend = L.control({position: 'bottomright'});
    flowLegend.onAdd = function () {
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += '<b>Traffic Flow 2018</b><br />';
        div.innerHTML += '<p><i class="fas fa-slash fa-2x" style="color: #fef0d9"></i> 387 - 7,636 Average Weekday Traffic</p>';
        div.innerHTML += '<p><i class="fas fa-slash fa-2x" style="color: #fdcc8a"></i> 7,636 - 15,261 Average Weekday Traffic</p>';
        div.innerHTML += '<p><i class="fas fa-slash fa-2x" style="color: #fc8d59"></i> 15,261 - 26,148 Average Weekday Traffic</p>';
        div.innerHTML += '<p><i class="fas fa-slash fa-2x" style="color: #e34a33"></i> 26,148 - 45,000 Average Weekday Traffic</p>';
        div.innerHTML += '<p><i class="fas fa-slash fa-2x" style="color: #b30000"></i> 45,000 - 108,179 Average Weekday Traffic</p>';
        div = styleDiv(div);
        return div;
    };

    // #fef0d9
    // #fedcac
    // #fdc383
    // #fd9f67
    // #f57a4e
    // #e75338
    // #cf2a1d
    // #b30000
    var collisionLegend = L.control({position: 'bottomright'});
    collisionLegend.onAdd = function () {
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += '<b>Collisions Per Tract</b><br />';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #fef0d9; box-shadow: 0px 0px 3px #888888;"></i> 2 - 663 Collisions</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #fedcac; box-shadow: 0px 0px 3px #888888;"></i> 663 - 1237 Collisions</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #fdc383; box-shadow: 0px 0px 3px #888888;"></i> 1237 - 1771 Collisions</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #fd9f67; box-shadow: 0px 0px 3px #888888;"></i> 1771 - 2405 Collisions</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #f57a4e; box-shadow: 0px 0px 3px #888888;"></i> 2405 - 3493 Collisions</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #e75338; box-shadow: 0px 0px 3px #888888;"></i> 3493 - 4661 Collisions</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #cf2a1d; box-shadow: 0px 0px 3px #888888;"></i> 4661 - 7590 Collisions</p>';
        div.innerHTML += '<p><i class="fas fa-square" style="color: #b30000; box-shadow: 0px 0px 3px #888888;"></i> 7590 - 9763 Collisions</p>';
        div = styleDiv(div);
        return div;
    };

    map.on('overlayadd', function (eventLayer) {
      if (eventLayer.name === 'Traffic Beacons Per Tract') {
        beaconLegend.addTo(map);
      } else if (eventLayer.name === 'Traffic Flow 2018') {
        flowLegend.addTo(map);
      } else if (eventLayer.name === 'Collisions Per Tract') {
        collisionLegend.addTo(map);
      } else if (eventLayer.name === 'Crash Cushions') {
        cushionLegend.addTo(map);
      }
    });



    // var legend = L.control({position: 'bottomright'});
    // beaconLegend.onAdd = function () {
    //     var div = L.DomUtil.create('div', 'legend');
    //     div.innerHTML += '<b>Count of Airports within a State</b><br />';
    //     // div.innerHTML += '<i style="background: ' + colors[4] + '; opacity: 0.5"></i><p> 19+ </p>';
    //     // div.innerHTML += '<i style="background: ' + colors[3] + '; opacity: 0.5"></i><p> 13-18 </p>';
    //     // div.innerHTML += '<i style="background: ' + colors[2] + '; opacity: 0.5"></i><p> 11-12 </p>';
    //     // div.innerHTML += '<i style="background: ' + colors[1] + '; opacity: 0.5"></i><p> 7-10 </p>';
    //     // div.innerHTML += '<i style="background: ' + colors[0] + '; opacity: 0.5"></i><p> 1-6 </p>';
    //     div.innerHTML += '<hr><b>Airport Type<b><br />';
    //     div.innerHTML += '<i class="fas fa-plane marker-color-1"></i><p> Airport with Control Tower </p>';
    //     div.innerHTML += '<i class="fas fa-paper-plane marker-color-2"></i><p> Airport without Control Tower </p>';
    //     return div;
    // };
    // legend.addTo(map);

    // map.on('overlayadd', function (eventLayer) {
    //     // Switch to the Population legend...
    //     if (eventLayer.name === 'Traffic Beacons Per Tract') {
    //       var legend = L.control({position: 'bottomright'});
    //       legend.onAdd = function () {
    //           var div = L.DomUtil.create('div', 'legend');
    //           div.innerHTML += '<b>Count of Airports within a State</b><br />';
    //           // div.innerHTML += '<i style="background: ' + colors[4] + '; opacity: 0.5"></i><p> 19+ </p>';
    //           // div.innerHTML += '<i style="background: ' + colors[3] + '; opacity: 0.5"></i><p> 13-18 </p>';
    //           // div.innerHTML += '<i style="background: ' + colors[2] + '; opacity: 0.5"></i><p> 11-12 </p>';
    //           // div.innerHTML += '<i style="background: ' + colors[1] + '; opacity: 0.5"></i><p> 7-10 </p>';
    //           // div.innerHTML += '<i style="background: ' + colors[0] + '; opacity: 0.5"></i><p> 1-6 </p>';
    //           div.innerHTML += '<hr><b>Airport Type<b><br />';
    //           div.innerHTML += '<i class="fas fa-plane marker-color-1"></i><p> Airport with Control Tower </p>';
    //           div.innerHTML += '<i class="fas fa-paper-plane marker-color-2"></i><p> Airport without Control Tower </p>';
    //           return div;
    //       };
    //       legend.addTo(map);
    //     } else { // Or switch to the Population Change legend...
    //         // this.removeControl(populationLegend);
    //         // populationChangeLegend.addTo(this);
    //     }
    // });

    map.on('overlayremove', function (eventLayer) {
      if (eventLayer.name === 'Traffic Beacons Per Tract') {
        map.removeControl(beaconLegend);
      } else if (eventLayer.name === 'Traffic Flow 2018') {
        map.removeControl(flowLegend);
      } else if (eventLayer.name === 'Collisions Per Tract') {
        map.removeControl(collisionLegend);
      } else if (eventLayer.name === 'Crash Cushions') {
        map.removeControl(cushionLegend);
      }
    });

  </script>
</body>

</html>
