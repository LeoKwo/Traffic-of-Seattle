<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/custom.css" rel="stylesheet">
  <title>Traffic of Seattle</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
  <style>
    html,
    body,
    main {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      background: #fff;
      display: flex;
      flex-flow: column;
    }

    #map {
      flex-grow: 1;
    }
  </style>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
</head>
<!-- <head>
  <title>Lab 4 Leo Kwo</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <style>
    html,
    body,
    #map {
      width: 100%;
      height: 100%;
      padding: 0;
      margin: 0;
    }
  </style>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head> -->

<body>

  <nav class="navbar navbar-expand-md navbar-dark bg-dark" id="override_nav">
    <div class="navbar-brand">Project Title</div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>


    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="">Map<span class="sr-only">(current)</span></a>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About</a>
          <div class="dropdown-menu" aria-labelledby="dropdown01">
            <a class="dropdown-item" href="#">Project Information</a>
            <a class="dropdown-item" href="#">Data Sources</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <div id="map"></div>
  <script type="text/javascript">
    var map = L.map('map', {
      maxZoom: 14,
      minZoom: 12
    }).setView([47.620856, -122.319963], 12);

    var grayscale = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}@2x.png').addTo(map);
    var streets = L.tileLayer('http://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}@2x.png');
    var satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}@2x');

    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	     attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	     subdomains: 'abcd',
	     maxZoom: 19
    }).addTo(map);

    var grayscale = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}@2x.png').addTo(map);
    var streets = L.tileLayer('http://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}@2x.png');
    var satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}@2x');


    var traffic = L.tileLayer('assets/tiles/traffic/{z}/{x}/{y}.png', {
      attribution: 'Generated by Leo Kwo | Traffic Flow 2018',
      detectRetina: true
    });

    var beacons = L.tileLayer('assets/tiles/beacon/{z}/{x}/{y}.png', {
      attribution: 'Generated by Leo Kwo | Traffic Beacons Per Tract',
      detectRetina: true
    });

    var collision = L.tileLayer('assets/tiles/collision/{z}/{x}/{y}.png', {
      attribution: 'Generated by Leo Kwo | Traffic Beacons Per Tract',
      detectRetina: true
    });

    var baseLayers = {
      'Grayscale': grayscale,
      'Streets': streets,
      'Satellite': satellite
    };

    var overlays = {
      "Collision Per Tract": collision,
      "Traffic Beacons Per Tract": beacons,
      "Traffic Flow 2018": traffic
    }

    // L.control.layers(baseLayers, overlays, {
    //   collapsed: false,
    //   position: 'topright'
    // }).addTo(mymap);
    L.control.layers(baseLayers, overlays, {
      collapsed: false,
      position: 'topright'
    }).addTo(map);




    var beaconLegend = L.control({position: 'bottomright'});
    beaconLegend.onAdd = function () {
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += '<b>Traffic Beacon Per Tract</b><br />';
        // div.innerHTML += '<i style="background: ' + colors[4] + '; opacity: 0.5"></i><p> 19+ </p>';
        // div.innerHTML += '<i style="background: ' + colors[3] + '; opacity: 0.5"></i><p> 13-18 </p>';
        // div.innerHTML += '<i style="background: ' + colors[2] + '; opacity: 0.5"></i><p> 11-12 </p>';
        // div.innerHTML += '<i style="background: ' + colors[1] + '; opacity: 0.5"></i><p> 7-10 </p>';
        // div.innerHTML += '<i style="background: ' + colors[0] + '; opacity: 0.5"></i><p> 1-6 </p>';
        div.innerHTML += '<hr><b>Airport Type<b><br />';
        div.innerHTML += '<i class="fas fa-plane marker-color-1"></i><p> Airport with Control Tower </p>';
        div.innerHTML += '<i class="fas fa-paper-plane marker-color-2"></i><p> Airport without Control Tower </p>';
        return div;
    };

    var flowLegend = L.control({position: 'bottomright'});
    flowLegend.onAdd = function () {
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += '<b>Traffic Flow 2018</b><br />';
        // div.innerHTML += '<i style="background: ' + colors[4] + '; opacity: 0.5"></i><p> 19+ </p>';
        // div.innerHTML += '<i style="background: ' + colors[3] + '; opacity: 0.5"></i><p> 13-18 </p>';
        // div.innerHTML += '<i style="background: ' + colors[2] + '; opacity: 0.5"></i><p> 11-12 </p>';
        // div.innerHTML += '<i style="background: ' + colors[1] + '; opacity: 0.5"></i><p> 7-10 </p>';
        // div.innerHTML += '<i style="background: ' + colors[0] + '; opacity: 0.5"></i><p> 1-6 </p>';
        div.innerHTML += '<hr><b>Airport Type<b><br />';
        div.innerHTML += '<i class="fas fa-plane marker-color-1"></i><p> Airport with Control Tower </p>';
        div.innerHTML += '<i class="fas fa-paper-plane marker-color-2"></i><p> Airport without Control Tower </p>';
        return div;
    };

    var collisionLegend = L.control({position: 'bottomright'});
    collisionLegend.onAdd = function () {
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += '<b>Collision Per Tract</b><br />';
        // div.innerHTML += '<i style="background: ' + colors[4] + '; opacity: 0.5"></i><p> 19+ </p>';
        // div.innerHTML += '<i style="background: ' + colors[3] + '; opacity: 0.5"></i><p> 13-18 </p>';
        // div.innerHTML += '<i style="background: ' + colors[2] + '; opacity: 0.5"></i><p> 11-12 </p>';
        // div.innerHTML += '<i style="background: ' + colors[1] + '; opacity: 0.5"></i><p> 7-10 </p>';
        // div.innerHTML += '<i style="background: ' + colors[0] + '; opacity: 0.5"></i><p> 1-6 </p>';
        div.innerHTML += '<hr><b>Airport Type<b><br />';
        div.innerHTML += '<i class="fas fa-plane marker-color-1"></i><p> Airport with Control Tower </p>';
        div.innerHTML += '<i class="fas fa-paper-plane marker-color-2"></i><p> Airport without Control Tower </p>';
        return div;
    };

    map.on('overlayadd', function (eventLayer) {
      if (eventLayer.name === 'Traffic Beacons Per Tract') {
        beaconLegend.addTo(map);
      } else if (eventLayer.name === 'Traffic Flow 2018') {
        flowLegend.addTo(map);
      } else if (eventLayer.name === 'Collision Per Tract') {
        collisionLegend.addTo(map);
      }
    });



    // var legend = L.control({position: 'bottomright'});
    // beaconLegend.onAdd = function () {
    //     var div = L.DomUtil.create('div', 'legend');
    //     div.innerHTML += '<b>Count of Airports within a State</b><br />';
    //     // div.innerHTML += '<i style="background: ' + colors[4] + '; opacity: 0.5"></i><p> 19+ </p>';
    //     // div.innerHTML += '<i style="background: ' + colors[3] + '; opacity: 0.5"></i><p> 13-18 </p>';
    //     // div.innerHTML += '<i style="background: ' + colors[2] + '; opacity: 0.5"></i><p> 11-12 </p>';
    //     // div.innerHTML += '<i style="background: ' + colors[1] + '; opacity: 0.5"></i><p> 7-10 </p>';
    //     // div.innerHTML += '<i style="background: ' + colors[0] + '; opacity: 0.5"></i><p> 1-6 </p>';
    //     div.innerHTML += '<hr><b>Airport Type<b><br />';
    //     div.innerHTML += '<i class="fas fa-plane marker-color-1"></i><p> Airport with Control Tower </p>';
    //     div.innerHTML += '<i class="fas fa-paper-plane marker-color-2"></i><p> Airport without Control Tower </p>';
    //     return div;
    // };
    // legend.addTo(map);

    // map.on('overlayadd', function (eventLayer) {
    //     // Switch to the Population legend...
    //     if (eventLayer.name === 'Traffic Beacons Per Tract') {
    //       var legend = L.control({position: 'bottomright'});
    //       legend.onAdd = function () {
    //           var div = L.DomUtil.create('div', 'legend');
    //           div.innerHTML += '<b>Count of Airports within a State</b><br />';
    //           // div.innerHTML += '<i style="background: ' + colors[4] + '; opacity: 0.5"></i><p> 19+ </p>';
    //           // div.innerHTML += '<i style="background: ' + colors[3] + '; opacity: 0.5"></i><p> 13-18 </p>';
    //           // div.innerHTML += '<i style="background: ' + colors[2] + '; opacity: 0.5"></i><p> 11-12 </p>';
    //           // div.innerHTML += '<i style="background: ' + colors[1] + '; opacity: 0.5"></i><p> 7-10 </p>';
    //           // div.innerHTML += '<i style="background: ' + colors[0] + '; opacity: 0.5"></i><p> 1-6 </p>';
    //           div.innerHTML += '<hr><b>Airport Type<b><br />';
    //           div.innerHTML += '<i class="fas fa-plane marker-color-1"></i><p> Airport with Control Tower </p>';
    //           div.innerHTML += '<i class="fas fa-paper-plane marker-color-2"></i><p> Airport without Control Tower </p>';
    //           return div;
    //       };
    //       legend.addTo(map);
    //     } else { // Or switch to the Population Change legend...
    //         // this.removeControl(populationLegend);
    //         // populationChangeLegend.addTo(this);
    //     }
    // });

    map.on('overlayremove', function (eventLayer) {
      if (eventLayer.name === 'Traffic Beacons Per Tract') {
        map.removeControl(beaconLegend);
      } else if (eventLayer.name === 'Traffic Flow 2018') {
        map.removeControl(flowLegend);
      } else if (eventLayer.name === 'Collision Per Tract') {
        map.removeControl(collisionLegend);
      }
    });

  </script>
</body>

</html>
